<div class="h-full overflow-y-auto p-4 space-y-4 bg-surface-50 dark:bg-surface-900">
  <!-- Header with Refresh Button -->
  <div class="flex justify-between items-center mb-2">
    <h2 class="text-lg font-semibold text-surface-900 dark:text-surface-0">Registros do Sistema</h2>
    <p-button 
      icon="pi pi-refresh" 
      label="Atualizar"
      (onClick)="refreshData()"
      size="small"
      severity="primary"
    />
  </div>

  <!-- Statistics Cards -->
  <div class="grid grid-cols-3 gap-3">
    <p-card>
      <div class="text-center">
        <i class="pi pi-shopping-cart text-3xl text-primary-500 mb-2"></i>
        <div class="text-2xl font-bold text-surface-900 dark:text-surface-0">
          <ng-container *ngIf="!loading.stats && stats">{{ stats.total_orders }}</ng-container>
          <p-skeleton *ngIf="loading.stats" width="3rem" height="1.5rem" />
        </div>
        <div class="text-sm text-surface-600 dark:text-surface-400">Pedidos</div>
      </div>
    </p-card>

    <p-card>
      <div class="text-center">
        <i class="pi pi-dollar text-3xl text-green-500 mb-2"></i>
        <div class="text-2xl font-bold text-surface-900 dark:text-surface-0">
          <ng-container *ngIf="!loading.stats && stats">{{ formatCurrency(stats.total_revenue) }}</ng-container>
          <p-skeleton *ngIf="loading.stats" width="4rem" height="1.5rem" />
        </div>
        <div class="text-sm text-surface-600 dark:text-surface-400">Receita</div>
      </div>
    </p-card>

    <p-card>
      <div class="text-center">
        <i class="pi pi-chart-bar text-3xl text-orange-500 mb-2"></i>
        <div class="text-2xl font-bold text-surface-900 dark:text-surface-0">
          <ng-container *ngIf="!loading.stats && stats">{{ formatCurrency(stats.average_order_value) }}</ng-container>
          <p-skeleton *ngIf="loading.stats" width="4rem" height="1.5rem" />
        </div>
        <div class="text-sm text-surface-600 dark:text-surface-400">Ticket Médio</div>
      </div>
    </p-card>
  </div>

  <!-- Products Section -->
  <p-card>
    <ng-template pTemplate="header">
      <div class="p-3 flex items-center gap-2 border-b border-surface-200 dark:border-surface-700">
        <i class="pi pi-box text-primary-500"></i>
        <span class="font-semibold text-surface-900 dark:text-surface-0">Produtos</span>
      </div>
    </ng-template>
    <p-table 
      [value]="products" 
      [paginator]="true" 
      [rows]="3"
      [loading]="loading.products"
      [showCurrentPageReport]="true"
      currentPageReportTemplate="Mostrando {first} a {last} de {totalRecords}"
    >
      <ng-template pTemplate="header">
        <tr>
          <th>Nome</th>
          <th>Categoria</th>
          <th>Preço</th>
          <th>Estoque</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-product>
        <tr>
          <td>
            <div class="font-medium text-surface-900 dark:text-surface-0">{{ product.name }}</div>
            <div class="text-xs text-surface-500 dark:text-surface-400">{{ product.description }}</div>
          </td>
          <td><p-tag [value]="product.category" severity="info" /></td>
          <td class="font-semibold text-surface-900 dark:text-surface-0">{{ formatCurrency(product.price) }}</td>
          <td><p-tag [value]="product.stock + ' un.'" [severity]="getStockSeverity(product.stock)" /></td>
        </tr>
      </ng-template>
      <ng-template pTemplate="emptymessage">
        <tr><td colspan="4" class="text-center py-3 text-surface-500 dark:text-surface-400">Nenhum produto</td></tr>
      </ng-template>
    </p-table>
  </p-card>

  <!-- Customers Section -->
  <p-card>
    <ng-template pTemplate="header">
      <div class="p-3 flex items-center gap-2 border-b border-surface-200 dark:border-surface-700">
        <i class="pi pi-users text-primary-500"></i>
        <span class="font-semibold text-surface-900 dark:text-surface-0">Clientes</span>
      </div>
    </ng-template>
    <p-table 
      [value]="customers" 
      [paginator]="true" 
      [rows]="3"
      [loading]="loading.customers"
      [showCurrentPageReport]="true"
      currentPageReportTemplate="Mostrando {first} a {last} de {totalRecords}"
    >
      <ng-template pTemplate="header">
        <tr>
          <th>Nome</th>
          <th>Email</th>
          <th>Telefone</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-customer>
        <tr>
          <td class="font-medium text-surface-900 dark:text-surface-0">{{ customer.name }}</td>
          <td class="text-sm text-surface-700 dark:text-surface-300">{{ customer.email }}</td>
          <td class="text-sm text-surface-700 dark:text-surface-300">{{ customer.phone }}</td>
        </tr>
      </ng-template>
      <ng-template pTemplate="emptymessage">
        <tr><td colspan="3" class="text-center py-3 text-surface-500 dark:text-surface-400">Nenhum cliente</td></tr>
      </ng-template>
    </p-table>
  </p-card>

  <!-- Orders Section -->
  <p-card>
    <ng-template pTemplate="header">
      <div class="p-3 flex items-center gap-2 border-b border-surface-200 dark:border-surface-700">
        <i class="pi pi-shopping-cart text-primary-500"></i>
        <span class="font-semibold text-surface-900 dark:text-surface-0">Pedidos Recentes</span>
      </div>
    </ng-template>
    <p-table 
      [value]="orders" 
      [paginator]="true" 
      [rows]="3"
      [loading]="loading.orders"
      [showCurrentPageReport]="true"
      currentPageReportTemplate="Mostrando {first} a {last} de {totalRecords}"
    >
      <ng-template pTemplate="header">
        <tr>
          <th>ID</th>
          <th>Total</th>
          <th>Status</th>
          <th>Data</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-order>
        <tr>
          <td class="font-mono text-xs text-surface-700 dark:text-surface-300">{{ order.id }}</td>
          <td class="font-semibold text-surface-900 dark:text-surface-0">{{ formatCurrency(order.total) }}</td>
          <td><p-tag [value]="order.status" [severity]="getStatusSeverity(order.status)" /></td>
          <td class="text-sm text-surface-700 dark:text-surface-300">{{ formatDate(order.created_at) }}</td>
        </tr>
      </ng-template>
      <ng-template pTemplate="emptymessage">
        <tr><td colspan="4" class="text-center py-3 text-surface-500 dark:text-surface-400">Nenhum pedido</td></tr>
      </ng-template>
    </p-table>
  </p-card>
</div>
